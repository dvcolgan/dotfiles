<!DOCTYPE html>
<html>
    <head>
        <title>Capital Letter Directories</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="/static/styles.css">

        <!-- Include highlight.js for code highlighting -->
        <link rel="stylesheet" href="/static/highlight.min.css">
        <link rel="stylesheet" href="http://localhost:3333/static/frontend/styles.css">
        <script src="/static/highlight.min.js"></script>
        <script src="/static/htmx.min.js"></script>
        <!-- Initial highlight for page load -->
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                hljs.highlightAll();
            });
        </script>
    </head>

    <body>
        <header>
            <nav class="header-nav">
                <ul>
                    <li>
                        <a href="/">Recursive Garden</a>
                    </li>
                    <li>
                        <a href="/home">Home</a>
                    </li>
                </ul>
            </nav>
        </header>
        {% block content %}
        {% endblock content %}

        <!-- HTMX event listeners for dynamic content -->
        <script>
            // Re-run highlighting when htmx content is loaded
            document.body.addEventListener('htmx:afterSwap', function(event) {
                // Find all code blocks in the swapped content and highlight them
                const codeBlocks = event.detail.elt.querySelectorAll('pre code');
                codeBlocks.forEach(block => {
                    hljs.highlightElement(block);
                });
            });
            
            // Also handle initial load of htmx content 
            document.body.addEventListener('htmx:load', function() {
                hljs.highlightAll();
            });
        </script>
        <script type="module" src="http://localhost:3333/static/@vite/client"></script>
        <script type="module" src="http://localhost:3333/static/frontend/main.js"></script>
    </body>
</html>